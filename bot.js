const { Telegraf } = require('telegraf');
const bot = new Telegraf(process.env.BOT_TOKEN);

// Ø¨Ø±Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† Ù…Ø§Ù†Ø¯Ù† Ø±Ø¨Ø§Øª
const http = require('http');
setInterval(() => {
  http.get('http://localhost:3000');
}, 300000);

// Ø¯Ø³ØªÙˆØ± start
bot.start((ctx) => {
  ctx.reply('ğŸ› ï¸ Ø³Ù„Ø§Ù…! Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªØ¹Ù…ÛŒØ±Ø§Øª Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!', {
    reply_markup: {
      keyboard: [
        ['ğŸ“± Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ¹Ù…ÛŒØ±'],
        ['ğŸ’° Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù‚ÛŒÙ…Øª', 'ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ']
      ],
      resize_keyboard: true
    }
  });
});

// Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
bot.hears('ğŸ“± Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ¹Ù…ÛŒØ±', (ctx) => {
  ctx.reply('âœ… Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ¹Ù…ÛŒØ±ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯:', {
    reply_markup: {
      inline_keyboard: [[
        {
          text: 'ğŸš€ Ø¨Ø§Ø²Ú©Ø±Ø¯Ù† ÙØ±Ù… Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª',
          web_app: { url: 'https://deft-narwhal-6f66e0.netlify.app/' }
        }
      ]]
    }
  });
});

bot.hears('ğŸ’° Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù‚ÛŒÙ…Øª', (ctx) => {
  ctx.reply(`ğŸ“‹ Ù„ÛŒØ³Øª Ù‚ÛŒÙ…Øª Ø®Ø¯Ù…Ø§Øª:\n
â€¢ ØªØ¹ÙˆÛŒØ¶ ØµÙØ­Ù‡ Ø¢ÛŒÙÙˆÙ†: 200,000 ØªÙˆÙ…Ø§Ù†
â€¢ ØªØ¹ÙˆÛŒØ¶ Ø¨Ø§ØªØ±ÛŒ: 80,000 ØªÙˆÙ…Ø§Ù†  
â€¢ Ø±ÙØ¹ Ù…Ø´Ú©Ù„ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø±ÛŒ: 50,000 ØªÙˆÙ…Ø§Ù†`);
});

bot.hears('ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ', (ctx) => {
  ctx.reply(`ğŸ“ Ø±Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø·ÛŒ:\n
â˜ï¸ ØªÙ„ÙÙ†: Û°Û²Û±-Û±Û²Û³Û´ÛµÛ¶Û·Û¸
ğŸ“± ÙˆØ§ØªØ³â€ŒØ§Ù¾: Û°Û¹Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹`);
});

// Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø§Ø² ÙˆØ¨â€ŒØ§Ù¾
bot.on('web_app_data', (ctx) => {
  try {
    const data = JSON.parse(ctx.webAppData.data.json);
    ctx.reply(`âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø«Ø¨Øª Ø´Ø¯!\nÙ†Ø§Ù…: ${data.name}\nØªÙ„ÙÙ†: ${data.phone}`);
  } catch (error) {
    ctx.reply('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª');
  }
});

console.log('ğŸ¤– Ø±Ø¨Ø§Øª Ø±ÙˆØ´Ù† Ø´Ø¯...');
bot.launch();
